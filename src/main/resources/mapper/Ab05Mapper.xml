<?xml version="1.0" encoding="GBK" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.han.travel.dao.Ab05Dao">
    <select id="queryById" parameterType="java.lang.Integer" resultType="java.util.HashMap">
        SELECT
          aaa101 AS "authorId", aab502 AS "title", aab503 AS "date", aab504 AS "setout", aab505 AS "period",
          aab506 AS "count", aab507 AS "telephone",aab508 AS "intro"
          FROM ab05
          WHERE aab509=1 AND aab501=#{id}
          ;
    </select>

    <update id="changeStateById">
        UPDATE ab05
        SET aab509=#{state}
        WHERE aab501=#{id}
        ;
    </update>

    <delete id="deleteById" parameterType="java.lang.Integer">
        DELETE FROM ab05
        WHERE aab509=0
        AND aab501=#{id}
        ;
    </delete>

    <insert id="insertCompany" parameterType="java.util.Map">
        <selectKey keyProperty="dto.id" resultType="java.lang.Integer" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        INSERT INTO ab05
        (aaa101, aab502, aab503, aab504, aab505,
         aab506, aab507, aab508, aab509)
         VALUES
         (#{dto.aaa101}, #{dto.aab502}, #{dto.aab503,jdbcType=DATE}, #{dto.aab504,jdbcType=VARCHAR}, #{dto.aab505,jdbcType=INTEGER},
          #{dto.aab506,jdbcType=INTEGER}, #{dto.aab507,jdbcType=VARCHAR}, #{dto.aab508}, 0)
         ;
    </insert>


    <select id="getAuthorIdById" parameterType="java.lang.Integer" resultType="java.lang.Integer">
        SELECT aaa101
        FROM ab05
        WHERE aab501=#{id} AND aab509=1;
        ;
    </select>

    <select id="getIntroById" parameterType="java.lang.Integer" resultType="java.lang.String">
        SELECT aab508
        FROM ab05
        WHERE aab501=#{id} AND aab509=1;
        ;
    </select>

</mapper>